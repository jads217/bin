#The prime factors of 13195 are 5, 7, 13 and 29.
#What is the largest prime factor of the number 600851475143 ?
use strict;

#my $num = 600851475143;
my $num = 5289978;
my $div = 2;
my $factor = 0;
my $isprime = 0;

#start with largest possible factor and loop until largest prime factor is found
while (($div < ((int $num / 2) + 1)) && ($isprime == 0)) {
	  $factor = $num / $div;
		if ($num % $div) {
        # factor is not an integer
				$factor = 0;
		}
		else {
				$isprime = is_prime($factor);
				if ($isprime == 0) {
						print "$factor is not prime\n";
						$factor = 0;
				}
		}

		$div = $div + 1;
}

if ($factor == 0) {
		print "There is no prime factor of $num\n";
}
else {
		print "The largest prime factor of $num is $factor\n";
}

#check that given factor is a prime number by dividing it by every possible divisor
sub is_prime {
		my $prime_div;
		my $prime_factor;
		for ($prime_div = 2; $prime_div < ((int $factor / 2) + 1); $prime_div++) {
				if (!($factor % $prime_div)) {
						$prime_factor = $factor / $prime_div;
						print "$factor has at least one factor, e.g. $prime_factor\n";
						return 0;
				}
		}
		print "$factor is prime.\n";
		return 1;
}
